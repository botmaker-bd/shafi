[
    {
        "id": "multi_step_registration",
        "name": "Multi-step Registration",
        "patterns": "/register, signup, join, setup",
        "description": "Complete user registration with validation",
        "code": "// Initialize registration process\nUser.saveData('registration_step', 'welcome');\n\nconst welcomeMsg = `ğŸ“ *Registration Process*\\\\n\\\\nLet's get you registered! This will only take a minute.\\\\n\\\\nWe'll collect your basic information.\\\\n\\\\nReady to begin?`;\n\nconst startButtons = [\n    [{ text: \"ğŸš€ Start Registration\", callback_data: \"start_reg\" }],\n    [{ text: \"â¸ï¸ Maybe Later\", callback_data: \"cancel_reg\" }]\n];\n\nApi.sendMessage(welcomeMsg, {\n    parse_mode: 'Markdown',\n    reply_markup: { inline_keyboard: startButtons }\n});",
        "waitForAnswer": true,
        "answerHandler": "const step = User.getData('registration_step');\nconst userInput = params;\n\nif (step === 'welcome') {\n    if (userInput === 'start_reg' || userInput.toLowerCase() === 'yes') {\n        User.saveData('registration_step', 'name');\n        Api.sendMessage(\"Great! What's your full name?\");\n    } else {\n        Api.sendMessage(\"No problem! You can register anytime with /register\");\n        User.saveData('registration_step', null);\n    }\n} else if (step === 'name') {\n    if (userInput.length < 2) {\n        Api.sendMessage(\"Please enter a valid name (at least 2 characters):\");\n        return;\n    }\n    User.saveData('user_name', userInput);\n    User.saveData('registration_step', 'email');\n    Api.sendMessage(`Nice to meet you, ${userInput}! ğŸ“§ What's your email address?`);\n} else if (step === 'email') {\n    if (!userInput.includes('@')) {\n        Api.sendMessage(\"Please enter a valid email address:\");\n        return;\n    }\n    User.saveData('user_email', userInput);\n    \n    // Registration complete\n    const userName = User.getData('user_name');\n    const completionMsg = `âœ… *Registration Complete!*\\\\n\\\\nğŸ“‹ *Your Details:*\\\\nâ€¢ Name: ${userName}\\\\nâ€¢ Email: ${userInput}\\\\n\\\\nğŸ‰ Welcome to our community!`;\n    \n    Api.sendMessage(completionMsg, { parse_mode: 'Markdown' });\n    User.saveData('registration_step', null);\n    User.saveData('is_registered', 'true');\n}"
    }
]