[
    {
        "id": "python_calculator",
        "name": "Python Calculator",
        "patterns": "/pythoncalc, pycalc, calculate",
        "description": "Advanced calculator using Python with multiple operations",
        "code": "bot.sendMessage(\"ðŸ *Python Calculator*\\n\\nEnter a mathematical expression or choose an operation:\", {\n    parse_mode: 'Markdown'\n});\n\nconst calcButtons = [\n    [\n        { text: \"ðŸ§® Basic Math\", callback_data: \"calc_basic\" },\n        { text: \"ðŸ“Š Statistics\", callback_data: \"calc_stats\" }\n    ],\n    [\n        { text: \"ðŸ“ˆ Graphing\", callback_data: \"calc_graph\" },\n        { text: \"ðŸ”¢ Matrix\", callback_data: \"calc_matrix\" }\n    ],\n    [\n        { text: \"â“ Examples\", callback_data: \"calc_examples\" }\n    ]\n];\n\nbot.sendMessage(\"Choose operation type:\", {\n    reply_markup: { inline_keyboard: calcButtons }\n});\n\nUser.saveData('calc_mode', 'awaiting_expression');",
        "waitForAnswer": true,
        "answerHandler": "const userInput = params;\n\nif (User.getData('calc_mode') === 'awaiting_expression') {\n    bot.sendMessage(`ðŸ”¢ Calculating: ${userInput}...`);\n    \n    try {\n        const result = await bot.runPython(`\nimport math\nimport random\n\n# Safe evaluation of mathematical expression\nexpression = \"\"\"${userInput}\"\"\".strip()\n\n# Define safe functions for calculation\nsafe_dict = {\n    'abs': abs, 'min': min, 'max': max, 'round': round,\n    'math': math, 'random': random,\n    'sin': math.sin, 'cos': math.cos, 'tan': math.tan,\n    'sqrt': math.sqrt, 'log': math.log, 'exp': math.exp,\n    'pi': math.pi, 'e': math.e\n}\n\n# Remove dangerous characters\nfor char in ['import', 'exec', 'eval', '__']:\n    if char in expression:\n        raise ValueError('Invalid expression')\n\ntry:\n    # Evaluate the expression\n    result = eval(expression, {\"__builtins__\": {}}, safe_dict)\n    print(f\"âœ… Result: {result}\")\n    print(f\"ðŸ“Š Type: {type(result).__name__}\")\n    \n    # Additional info for numbers\n    if isinstance(result, (int, float)):\n        print(f\"ðŸ”¢ Decimal: {float(result)}\")\n        if result > 0:\n            print(f\"âˆš Square root: {math.sqrt(result):.4f}\")\n            print(f\"Â² Square: {result**2}\")\n            \nexcept Exception as e:\n    print(f\"âŒ Calculation error: {str(e)}\")\n        `);\n        \n        bot.sendMessage(`âœ… *Calculation Result*\\n\\n\\`\\`\\`\\n${result}\\n\\`\\`\\``, {\n            parse_mode: 'Markdown'\n        });\n        \n    } catch (error) {\n        bot.sendMessage(`âŒ *Python Error*\\n\\n\\`\\`\\`\\n${error.message}\\n\\`\\`\\``, {\n            parse_mode: 'Markdown'\n        });\n    }\n    \n    User.saveData('calc_mode', null);\n}"
    },
    {
        "id": "data_analysis",
        "name": "Data Analysis",
        "patterns": "/analyze, stats, analysis, insights",
        "description": "Perform data analysis using Python pandas and numpy",
        "code": "// Create sample data for analysis\nconst sampleData = {\n    sales: [120, 150, 130, 200, 180, 220, 190, 210, 230, 250, 240, 260],\n    months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    expenses: [80, 90, 85, 110, 100, 120, 115, 125, 130, 140, 135, 150]\n};\n\nUser.saveData('analysis_data', JSON.stringify(sampleData));\n\nbot.sendMessage(\"ðŸ“Š *Data Analysis Tool*\\n\\nAnalyzing sample sales data...\", {\n    parse_mode: 'Markdown'\n});\n\ntry {\n    const result = await bot.runPython(`\nimport pandas as pd\nimport numpy as np\nimport json\n\n# Load the data\ndata_json = \"\"\"${JSON.stringify(sampleData)}\"\"\"\ndata = json.loads(data_json)\n\n# Create DataFrame\ndf = pd.DataFrame({\n    'Month': data['months'],\n    'Sales': data['sales'],\n    'Expenses': data['expenses']\n})\n\n# Calculate metrics\ntotal_sales = df['Sales'].sum()\ntotal_expenses = df['Expenses'].sum()\nnet_profit = total_sales - total_expenses\nprofit_margin = (net_profit / total_sales) * 100\n\n# Statistical analysis\navg_sales = df['Sales'].mean()\nmax_sales = df['Sales'].max()\nmin_sales = df['Sales'].min()\nstd_sales = df['Sales'].std()\n\n# Best and worst months\nbest_month = df.loc[df['Sales'].idxmax(), 'Month']\nworst_month = df.loc[df['Sales'].idxmin(), 'Month']\n\n# Growth calculation\ngrowth = ((df['Sales'].iloc[-1] - df['Sales'].iloc[0]) / df['Sales'].iloc[0]) * 100\n\n# Create analysis report\nreport = f\"\"\"\nðŸ“ˆ *Sales Analysis Report*\\n\\n\nðŸ’° *Financial Summary:*\\nâ€¢ Total Sales: ${total_sales:,.2f}\\nâ€¢ Total Expenses: ${total_expenses:,.2f}\\nâ€¢ Net Profit: ${net_profit:,.2f}\\nâ€¢ Profit Margin: {profit_margin:.1f}%\\n\\n\nðŸ“Š *Statistical Analysis:*\\nâ€¢ Average Sales: ${avg_sales:.2f}\\nâ€¢ Maximum Sales: ${max_sales:.2f}\\nâ€¢ Minimum Sales: ${min_sales:.2f}\\nâ€¢ Standard Deviation: {std_sales:.2f}\\n\\n\nðŸ† *Performance Highlights:*\\nâ€¢ Best Month: {best_month} (${max_sales:.2f})\\nâ€¢ Worst Month: {worst_month} (${min_sales:.2f})\\nâ€¢ Overall Growth: {growth:.1f}%\\n\\n\nðŸ’¡ *Insights:*\\n- {'Strong positive trend' if growth > 0 else 'Needs improvement'}\\n- {'Healthy profit margin' if profit_margin > 20 else 'Low margin'}\\n- {'Stable performance' if std_sales < 50 else 'High volatility'}\\n\"\"\"\n\nprint(report)\n\n# Additional data preview\nprint(\"\\n\" + \"=\"*50)\nprint(\"ðŸ“‹ Data Preview:\")\nprint(df.head().to_string())\n    `);\n    \n    bot.sendMessage(`âœ… *Analysis Complete*\\n\\n\\`\\`\\`\\n${result}\\n\\`\\`\\``, {\n        parse_mode: 'Markdown'\n    });\n    \n} catch (error) {\n    bot.sendMessage(`âŒ *Analysis Error*\\n\\n\\`\\`\\`\\n${error.message}\\n\\`\\`\\``, {\n        parse_mode: 'Markdown'\n    });\n}",
        "waitForAnswer": false,
        "answerHandler": ""
    }
]