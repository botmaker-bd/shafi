[
  {
    "id": "welcome_interactive",
    "name": "Interactive Welcome",
    "patterns": "/start, start, hello",
    "description": "Interactive welcome with buttons and user engagement",
    "code": "const user = getUser();\nconst welcomeMsg = `ğŸ‰ *Welcome ${user.first_name}!* \n\nI'm your assistant bot with amazing features:\n\nâœ¨ *What I can do:*\nâ€¢ Process text and files\nâ€¢ Convert between formats\nâ€¢ Provide information\nâ€¢ Much more!\n\nğŸ”§ *Get started by choosing an option below:*`;\n\nawait bot.sendMessage(chatId, welcomeMsg, {\n    parse_mode: 'Markdown',\n    reply_markup: {\n        inline_keyboard: [\n            [\n                { text: 'ğŸš€ Quick Start', callback_data: 'quick_start' },\n                { text: 'ğŸ“š Tutorial', callback_data: 'tutorial' }\n            ],\n            [\n                { text: 'ğŸ”§ Tools', callback_data: 'tools_menu' },\n                { text: 'âš™ï¸ Settings', callback_data: 'settings_menu' }\n            ],\n            [\n                { text: 'ğŸ“ Support', url: 'https://t.me/support' },\n                { text: 'â­ Rate Bot', url: 'https://t.me/store' }\n            ]\n        ]\n    }\n});\n\n// Save user first interaction\nUser.saveData('first_visit', new Date().toISOString());\nUser.saveData('usage_count', 1);",
    "waitForAnswer": false,
    "answerHandler": ""
  },
  {
    "id": "text_utility",
    "name": "Text Utilities",
    "patterns": "/text, text, format",
    "description": "Multiple text manipulation utilities in one command",
    "code": "const fullText = msg.text || '';\nconst args = fullText.split(' ');\nconst action = args[1] ? args[1].toLowerCase() : '';\nconst inputText = args.slice(2).join(' ');\n\nif (!action) {\n    const helpText = `ğŸ“ *Text Utilities*\n\n*Available Actions:*\nâ€¢ uppercase - Convert to UPPERCASE\nâ€¢ lowercase - convert to lowercase\nâ€¢ titlecase - Convert To Title Case\nâ€¢ reverse - esrever txet\nâ€¢ length - Count characters\nâ€¢ words - Count words\n\n*Usage:*\n/text uppercase hello world\n/text length count this text\n/text reverse mirror`;\n\n    return bot.sendMessage(chatId, helpText, { parse_mode: 'Markdown' });\n}\n\nif (!inputText) {\n    return bot.sendMessage(chatId, 'âŒ Please provide text to process.\\nExample: /text uppercase hello world');\n}\n\nlet result = '';\nswitch (action) {\n    case 'uppercase':\n    case 'upper':\n        result = inputText.toUpperCase();\n        break;\n    case 'lowercase':\n    case 'lower':\n        result = inputText.toLowerCase();\n        break;\n    case 'titlecase':\n    case 'title':\n        result = inputText.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\n        break;\n    case 'reverse':\n        result = inputText.split('').reverse().join('');\n        break;\n    case 'length':\n    case 'count':\n        result = `Characters: ${inputText.length}\\nWords: ${inputText.split(/\\s+/).filter(word => word.length > 0).length}`;\n        break;\n    case 'words':\n        const words = inputText.split(/\\s+/).filter(word => word.length > 0);\n        result = `Word count: ${words.length}\\nWords: ${words.join(', ')}`;\n        break;\n    default:\n        return bot.sendMessage(chatId, `âŒ Unknown action: ${action}\\nUse /text to see available actions.`);\n}\n\nawait bot.sendMessage(chatId, `âœ… *Text Processing Result*\n\n*Action:* ${action}\\n*Input:* ${inputText}\\n*Result:* \\`${result}\\``, {\n    parse_mode: 'Markdown',\n    reply_to_message_id: msg.message_id\n});",
    "waitForAnswer": false,
    "answerHandler": ""
  },
  {
    "id": "file_info",
    "name": "File Information",
    "patterns": "/fileinfo, fileinfo, file",
    "description": "Get detailed information about any file or document",
    "code": "// File Information Template\nif (!msg.document && !msg.photo && !msg.video && !msg.audio && !msg.voice) {\n    return bot.sendMessage(chatId, `ğŸ“ *File Information Tool*\\n\\nPlease send me a file, photo, video, audio, or voice message to analyze.\\n\\n*Supported formats:*\\nâ€¢ Documents (PDF, TXT, DOC)\\nâ€¢ Images (JPG, PNG, GIF)\\nâ€¢ Videos (MP4, AVI)\\nâ€¢ Audio files (MP3, WAV)\\nâ€¢ Voice messages`,\n    { parse_mode: 'Markdown' });\n}\n\nlet fileInfo = '';\nlet fileType = '';\nlet fileSize = 0;\n\nif (msg.document) {\n    fileType = msg.document.mime_type || 'Document';\n    fileSize = msg.document.file_size;\n    fileInfo = `ğŸ“„ *Document Analysis*\\n\\n`;\n} else if (msg.photo) {\n    fileType = 'Image/Photo';\n    const photo = msg.photo[msg.photo.length - 1]; // Highest resolution\n    fileSize = photo.file_size;\n    fileInfo = `ğŸ–¼ï¸ *Image Analysis*\\n\\n`;\n} else if (msg.video) {\n    fileType = msg.video.mime_type || 'Video';\n    fileSize = msg.video.file_size;\n    fileInfo = `ğŸ¥ *Video Analysis*\\n\\n`;\n} else if (msg.audio) {\n    fileType = msg.audio.mime_type || 'Audio';\n    fileSize = msg.audio.file_size;\n    fileInfo = `ğŸµ *Audio Analysis*\\n\\n`;\n} else if (msg.voice) {\n    fileType = 'Voice Message';\n    fileSize = msg.voice.file_size;\n    fileInfo = `ğŸ¤ *Voice Message Analysis*\\n\\n`;\n}\n\nfileInfo += `ğŸ“Š *File Details:*\\n`;\nfileInfo += `â€¢ Type: ${fileType}\\n`;\nfileInfo += `â€¢ Size: ${(fileSize / 1024).toFixed(2)} KB\\n`;\n\nif (msg.document) {\n    fileInfo += `â€¢ Filename: ${msg.document.file_name || 'Unknown'}\\n`;\n}\n\nif (msg.video) {\n    fileInfo += `â€¢ Duration: ${msg.video.duration || 0} seconds\\n`;\n    fileInfo += `â€¢ Dimensions: ${msg.video.width || 0}x${msg.video.height || 0}\\n`;\n}\n\nif (msg.audio) {\n    fileInfo += `â€¢ Duration: ${msg.audio.duration || 0} seconds\\n`;\n    fileInfo += `â€¢ Title: ${msg.audio.title || 'Unknown'}\\n`;\n    fileInfo += `â€¢ Performer: ${msg.audio.performer || 'Unknown'}\\n`;\n}\n\nfileInfo += `\\nğŸ†” *Message ID:* ${msg.message_id}\\n`;\nfileInfo += `ğŸ‘¤ *Sent by:* ${msg.from.first_name}\\n`;\nfileInfo += `â° *Time:* ${new Date(msg.date * 1000).toLocaleString()}`;\n\nawait bot.sendMessage(chatId, fileInfo, {\n    parse_mode: 'Markdown',\n    reply_to_message_id: msg.message_id\n});\n\n// Log file analysis\nUser.saveData('last_file_analysis', new Date().toISOString());\nUser.increment('files_analyzed', 1);",
    "waitForAnswer": false,
    "answerHandler": ""
  },
  {
    "id": "conversation_starter",
    "name": "Conversation Starter",
    "patterns": "/chat, chat, talk, conversation",
    "description": "Interactive conversation with multiple questions",
    "code": "// Conversation Starter Template\nconst user = getUser();\n\nconst welcomeMsg = `ğŸ’¬ *Let's Have a Conversation!* \\n\\nI'll ask you a few questions to get to know you better. Ready to begin?`;\n\nawait bot.sendMessage(chatId, welcomeMsg, { \n    parse_mode: 'Markdown',\n    reply_markup: {\n        inline_keyboard: [[\n            { text: 'âœ… Yes, Start!', callback_data: 'start_chat' },\n            { text: 'âŒ Maybe Later', callback_data: 'cancel_chat' }\n        ]]\n    }\n});",
    "waitForAnswer": true,
    "answerHandler": "// Handle conversation responses\nif (params.toLowerCase().includes('yes') || params.toLowerCase().includes('start')) {\n    await bot.sendMessage(chatId, `Great! Let's begin...\\n\\nWhat's your favorite hobby? ğŸ¨âš½ğŸ®`);\n    \n    // Set next question handler\n    const hobby = await waitForAnswer(\"I'm curious about your hobbies! What do you enjoy doing in your free time?\");\n    \n    await bot.sendMessage(chatId, `Nice! \\\"${hobby}\\\" sounds interesting! ğŸ¯\\n\\nNow, what's your favorite type of music? ğŸµ`);\n    \n    const music = await waitForAnswer(\"What kind of music gets you moving? ğŸ¶\");\n    \n    const summary = `ğŸ‰ *Nice Chatting With You!*\\n\\nHere's what I learned:\\n\\nğŸ‘¤ *Name:* ${user.first_name}\\nğŸ¨ *Hobby:* ${hobby}\\nğŸµ *Music:* ${music}\\n\\nThanks for sharing! It was great getting to know you better! ğŸ˜Š`;\n    \n    await bot.sendMessage(chatId, summary, { parse_mode: 'Markdown' });\n    \n    // Save conversation data\n    User.saveData('last_chat', new Date().toISOString());\n    User.saveData('user_hobby', hobby);\n    User.saveData('user_music', music);\n    User.increment('chats_completed', 1);\n    \n} else {\n    await bot.sendMessage(chatId, \"No problem! Feel free to start a conversation anytime by typing /chat ğŸ˜Š\");\n}"
  },
  {
    "id": "weather_basic",
    "name": "Weather Information",
    "patterns": "/weather, weather, forecast",
    "description": "Get weather information for any city",
    "code": "const fullText = msg.text || '';\nconst city = fullText.replace(/^\\/\\w+\\s*/, '').trim();\n\nif (!city) {\n    return bot.sendMessage(chatId, `ğŸŒ¤ï¸ *Weather Information*\\n\\n*Usage:*\\n/weather London\\n/weather New York\\n/weather Tokyo\\n\\n*Example:*\\n\\`/weather Dhaka\\`\\n\\`/weather New York\\``, \n    { parse_mode: 'Markdown' });\n}\n\n// Show loading message\nconst loadingMsg = await bot.sendMessage(chatId, `ğŸ” Searching weather for *${city}*...`, \n{ parse_mode: 'Markdown' });\n\ntry {\n    // Simulate API call - in real implementation, use actual weather API\n    await bot.wait(2000); // Simulate API delay\n    \n    // Mock weather data (replace with real API)\n    const mockWeather = {\n        temperature: Math.floor(Math.random() * 35) + 5,\n        condition: ['Sunny', 'Cloudy', 'Rainy', 'Partly Cloudy'][Math.floor(Math.random() * 4)],\n        humidity: Math.floor(Math.random() * 60) + 30,\n        wind: (Math.random() * 20 + 5).toFixed(1)\n    };\n    \n    const weatherEmoji = {\n        'Sunny': 'â˜€ï¸',\n        'Cloudy': 'â˜ï¸',\n        'Rainy': 'ğŸŒ§ï¸',\n        'Partly Cloudy': 'â›…'\n    };\n    \n    const weatherReport = `${weatherEmoji[mockWeather.condition]} *Weather in ${city}*\\n\\n` +\n                         `ğŸŒ¡ï¸ Temperature: *${mockWeather.temperature}Â°C*\\n` +\n                         `ğŸ“Š Condition: *${mockWeather.condition}*\\n` +\n                         `ğŸ’§ Humidity: *${mockWeather.humidity}%*\\n` +\n                         `ğŸ’¨ Wind: *${mockWeather.wind} km/h*\\n\\n` +\n                         `_Note: This is demo data. Connect to a real weather API for accurate information._`;\n    \n    // Edit the loading message with results\n    await bot.editMessageText(weatherReport, {\n        chat_id: chatId,\n        message_id: loadingMsg.message_id,\n        parse_mode: 'Markdown'\n    });\n    \n    // Log weather search\n    User.saveData('last_weather_search', city);\n    User.increment('weather_searches', 1);\n    \n} catch (error) {\n    await bot.editMessageText(`âŒ *Weather Service Unavailable*\\n\\nCould not fetch weather for *${city}*. Please try again later.`,\n    {\n        chat_id: chatId,\n        message_id: loadingMsg.message_id,\n        parse_mode: 'Markdown'\n    });\n}",
    "waitForAnswer": false,
    "answerHandler": ""
  }
]